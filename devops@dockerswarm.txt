Swarm-da lazim olan portlar
 










TCP 2377 Manager nodelerin oz aralarinda danishan portdur (Yeni swarmlarin)
TCP/UDP 7946 node-lerin oz aralarinda
TCP 4789 Overlay network trafiki idare edir

Docker Swarm NÉ™dir?
Docker Swarm, Docker konteynerlÉ™rinin bir necÌ§É™ node (server) uÌˆzÉ™rindÉ™ klaster sÌ§É™kildÉ™ isÌ§lÉ™mÉ™sini tÉ™min edÉ™n orkestrasiya alÉ™tidir. Kubernetes kimi genisÌ§ funksionallÄ±gÌ†Ä± olmasa da, asandÄ±r vÉ™ Docker ilÉ™ sÄ±x inteqrasiya olunub.
Docker Swarm-Ä±n É™sas xuÌˆsusiyyÉ™tlÉ™ri:
âœ… Klaster idarÉ™etmÉ™si (Multiple nodes â€“ Manager & Worker)
âœ… XidmÉ™t (Service) vÉ™ Task anlayÄ±sÌ§Ä±
âœ… Load Balancing (yuÌˆk balanslama)
âœ… Self-healing (oÌˆz-oÌˆzuÌˆnuÌˆ bÉ™rpa etmÉ™)
âœ… Rolling Updates (yenilÉ™mÉ™lÉ™ri tÉ™dricÉ™n tÉ™tbiq etmÉ™)
âœ… Built-in Discovery (daxili xidmÉ™t kÉ™sÌ§fi)

1. Docker Swarm QurasÌ§dÄ±rÄ±lmasÄ± vÉ™ KonfiqurasiyasÄ±
Docker Swarm-i test vÉ™ ya real muÌˆhitdÉ™ qurmaq uÌˆcÌ§uÌˆn É™n azÄ± 2 server (node) lazÄ±mdÄ±r. BunlarÄ± lokal muÌˆhitdÉ™ (VM-lÉ™rlÉ™) vÉ™ ya buludda (AWS, Azure, GCP, DigitalOcean) qurasÌ§dÄ±ra bilÉ™rsÉ™n.
âœ… TÉ™lÉ™blÉ™r:
â€¢	2 vÉ™ ya daha cÌ§ox Linux (Ubuntu, Debian, CentOS) server
â€¢	Docker Engine qurasÌ§dÄ±rÄ±lmÄ±sÌ§ olmalÄ±dÄ±r
1.1 Docker Engine QurasÌ§dÄ±rÄ±lmasÄ±
ÆgÉ™r Docker sistemdÉ™ qurasÌ§dÄ±rÄ±lmayÄ±bsa, asÌ§agÌ†Ä±dakÄ± É™mrlÉ™rlÉ™ onu qurasÌ§dÄ±ra bilÉ™rsÉ™n:
sudo apt update && sudo apt upgrade -y
sudo apt install -y docker.io
sudo systemctl enable docker
sudo systemctl start docker
ÆgÉ™r Docker-in rÉ™smi versiyasÄ±nÄ± istÉ™yirsÉ™nsÉ™:
curl -fsSL https://get.docker.com | sh
Docker-in isÌ§lÉ™diyini yoxla:

docker version
docker info
docker info | grep â€œswarmâ€ yazmaqla biz tam deqiq bilirik ki bizde Node-da swarm inactivedir
Docker swarm init edende arti bizde swarm aktive edilir
docker swarm join-token worker

2. Swarm Modunu Aktiv EtmÉ™k
Swarm modunu Manager Node-da aktivlÉ™sÌ§diririk:
docker swarm init --advertise-addr <Manager_IP>
ğŸ“Œ <Manager_IP> â€“ manager node-un IP uÌˆnvanÄ±nÄ± yazmalÄ±san.
UgÌ†urla basÌ§a cÌ§atdÄ±qdan sonra Worker node-larÄ± qosÌ§maq uÌˆcÌ§uÌˆn bir token verÉ™cÉ™k.
docker swarm join-token worker
Bunu worker node-da isÌ§lÉ™:
docker swarm join --token <TOKEN> <MANAGER_IP>:2377
Worker ugÌ†urla qosÌ§ulubsa, manager node-da asÌ§agÌ†Ä±dakÄ± É™mrlÉ™ bunu goÌˆrÉ™ bilÉ™rsÉ™n:
docker node ls
ÆgÉ™r node-u Manager etmÉ™k istÉ™yirsÉ™nsÉ™, bu É™mrdÉ™n istifadÉ™ edÉ™ bilÉ™rsÉ™n:
docker node promote <NODE_ID>

3. Swarm-da XidmÉ™tlÉ™rin IÌ‡darÉ™ EdilmÉ™si
Yeni bir xidmÉ™t yaratmaq uÌˆcÌ§uÌˆn:
docker service create --name nginx -p 80:80 nginx
ğŸ“Œ nginx adlÄ± bir xidmÉ™t yaradÄ±rÄ±q vÉ™ onu 80-ci portda acÌ§Ä±rÄ±q.
XidmÉ™tlÉ™ri yoxlamaq uÌˆcÌ§uÌˆn:
docker service ls
DetallarÄ± goÌˆrmÉ™k uÌˆcÌ§uÌˆn:
docker service ps nginx

4. Load Balancing vÉ™ Replikasiya
XidmÉ™ti birdÉ™n cÌ§ox replikasiya ilÉ™ yaratmaq uÌˆcÌ§uÌˆn:
docker service create --name myweb --replicas 3 -p 8080:80 nginx
ğŸ“Œ Bu É™mrlÉ™ 3 replikalÄ± nginx xidmÉ™ti yaradÄ±lÄ±r.
ReplikalarÄ± artÄ±rÄ±b azaltmaq:
docker service scale myweb=5
ğŸ“Œ XidmÉ™tin replikalarÄ±nÄ±n sayÄ±nÄ± 5-É™ cÌ§atdÄ±rÄ±r.
XidmÉ™tin silinmÉ™si:
docker service rm myweb

5. Rolling Update vÉ™ Rollback
XidmÉ™ti yenilÉ™mÉ™k:
docker service update --image nginx:latest myweb
ğŸ“Œ Yeni versiyanÄ± tÉ™tbiq edir.
ÆvvÉ™lki versiyaya qayÄ±tmaq:
docker service rollback myweb

6. Swarm-da SÌ§É™bÉ™kÉ™ (Networking)
SÌ§É™bÉ™kÉ™ yaratmaq vÉ™ istifadÉ™ etmÉ™k:
docker network create --driver overlay mynet
docker service create --name myweb --network mynet nginx

7. Swarm Klasterinin DayandÄ±rÄ±lmasÄ± vÉ™ SÄ±fÄ±rlanmasÄ±
ÆgÉ™r klasteri dayandÄ±rmaq istÉ™yirsÉ™nsÉ™:
docker swarm leave --force
ğŸ“Œ Manager node-da bunu etsÉ™n, buÌˆtuÌˆn Swarm silinir.
Worker node-u cÌ§Ä±xarmaq uÌˆcÌ§uÌˆn isÉ™:
docker swarm leave

NÉ™ticÉ™
Docker Swarm asandÄ±r, yuÌˆnguÌˆlduÌˆr vÉ™ Docker-in ekosisteminÉ™ inteqrasiya olunmusÌ§dur. ÆgÉ™r Kubernetes-dÉ™n É™vvÉ™l sadÉ™ orkestrasiya oÌˆyrÉ™nmÉ™k istÉ™yirsÉ™nsÉ™, Docker Swarm ideal secÌ§imdir.
ÆgÉ™r praktiki mÉ™sÌ§qlÉ™rÉ™ kecÌ§mÉ™k istÉ™yirsÉ™nsÉ™, mÉ™n sÉ™nÉ™ real layihÉ™ uÌˆzÉ™rindÉ™ isÌ§lÉ™mÉ™k uÌˆcÌ§uÌˆn bÉ™zi tapsÌ§Ä±rÄ±qlar vÉ™ layihÉ™ nuÌˆmunÉ™lÉ™ri tÉ™qdim edÉ™ bilÉ™rÉ™m. ğŸš€

docker swarm init
docker swarm join --token <TOKEN> <MANAGER-IP>:2377
docker node ls

Docker Swarm muÌˆhitindÉ™ node-larÄ±n idarÉ™ edilmÉ™si uÌˆcÌ§uÌˆn asÌ§agÌ†Ä±dakÄ± komandalar istifadÉ™ olunur:
docker node promote
Worker node-u Manager node-a cÌ§evirmÉ™k uÌˆcÌ§uÌˆn istifadÉ™ olunur.
Swarm klasterindÉ™ manager roluna malik olan node-lar idarÉ™etmÉ™ É™mÉ™liyyatlarÄ±nÄ± hÉ™yata kecÌ§irÉ™ bilÉ™r, mÉ™sÉ™lÉ™n, xidmÉ™tlÉ™rin yerlÉ™sÌ§dirilmÉ™si (deploy), yeni node-larÄ±n É™lavÉ™ edilmÉ™si vÉ™ s.
docker node promote worker1

docker node demote
Manager node-u Worker node-a cÌ§evirmÉ™k uÌˆcÌ§uÌˆn istifadÉ™ olunur.
ÆgÉ™r bir node artÄ±q idarÉ™etmÉ™ (management) funksiyalarÄ±nÄ± icra etmÉ™mÉ™lidirsÉ™, onu yenidÉ™n worker-É™ cÌ§evirmÉ™k olar.
docker node demote manager2

docker node update â€“availability
Node-un vÉ™ziyyÉ™tini (active, pause, drain) dÉ™yisÌ§dirmÉ™k uÌˆcÌ§uÌˆn istifadÉ™ olunur.
Bu É™mr node-un hansÄ± vÉ™ziyyÉ™tdÉ™ olacagÌ†Ä±nÄ± idarÉ™ edir:
âœ… active â€“ Node aktivdir vÉ™ workload (yÉ™ni, konteynerlÉ™r) qÉ™bul edÉ™ bilÉ™r.
â¸ pause â€“ Node isÌ§lÉ™k qalÄ±r, amma yeni workload qÉ™bul etmir.
ğŸš« drain â€“ Node moÌˆvcud workload-larÄ± basÌ§qa node-lara koÌˆcÌ§uÌˆruÌˆr vÉ™ yeni workload qÉ™bul etmir.
docker node update --availability drain worker2
Yeni bir Worker node-u Manager-a cÌ§evirmÉ™k:
docker node promote worker3
Bir Manager node-u Worker-a cÌ§evirmÉ™k:
docker node demote manager1
MuÌˆvÉ™qqÉ™ti olaraq bir node-u workload qÉ™bul etmÉ™yÉ™ dayandÄ±rmaq (pause):
docker node update --availability pause worker1
Bir node-u tamamilÉ™ workload qÉ™bul etmÉ™mÉ™si uÌˆcÌ§uÌˆn ayÄ±rmaq (drain):
docker node update --availability drain worker2
Bir node-u yenidÉ™n aktiv etmÉ™k:
docker node update --availability active worker2
#######

Portainer nÉ™dir?
Portainer, Docker, Docker Swarm vÉ™ Kubernetes kimi konteyner muÌˆhitlÉ™rini qrafik interfeys (GUI) vasitÉ™silÉ™ idarÉ™ etmÉ™yÉ™ imkan verÉ™n acÌ§Ä±q mÉ™nbÉ™li (open-source) bir platformadÄ±r. Æsas mÉ™qsÉ™di konteynerlÉ™rin idarÉ™ edilmÉ™sini asanlasÌ§dÄ±rmaqdÄ±r.



Portainer nÉ™dir vÉ™ nÉ™ uÌˆcÌ§uÌˆn lazÄ±mdÄ±r?
Portainer, konteyner orkestrasiyasÄ±nÄ± vÉ™ idarÉ™etmÉ™sini asanlasÌ§dÄ±ran bir veb interfeysdir. Docker, Docker Swarm vÉ™ Kubernetes kimi konteyner sistemlÉ™rini idarÉ™ etmÉ™k uÌˆcÌ§uÌˆn istifadÉ™ olunur. O, qrafik interfeys tÉ™qdim edÉ™rÉ™k, É™mr sÉ™tri vasitÉ™silÉ™ yerinÉ™ yetirilÉ™n bir cÌ§ox É™mÉ™liyyatÄ± asanlasÌ§dÄ±rÄ±r.

Portainer-in uÌˆstuÌˆnluÌˆklÉ™ri:
âœ… IÌ‡stifadÉ™ rahatlÄ±gÌ†Ä± â€“ CLI (komanda sÉ™tri) bilmÉ™dÉ™n konteynerlÉ™ri idarÉ™ etmÉ™k imkanÄ± yaradÄ±r.
âœ… Docker vÉ™ Kubernetes dÉ™stÉ™yi â€“ HÉ™m lokal Docker hostlarÄ±nÄ±, hÉ™m dÉ™ klaster muÌˆhitlÉ™rini idarÉ™ edir.
âœ… Qrafik interfeys â€“ KonteynerlÉ™rin, imiclÉ™rin, hÉ™cm (volume), sÌ§É™bÉ™kÉ™lÉ™rin vÉ™ servislÉ™rin idarÉ™ edilmÉ™si uÌˆcÌ§uÌˆn asan istifadÉ™ olunan veb interfeys tÉ™qdim edir.
âœ… Multi-user vÉ™ RBAC (Role-Based Access Control) â€“ MuÌˆxtÉ™lif istifadÉ™cÌ§ilÉ™r uÌˆcÌ§uÌˆn fÉ™rqli icazÉ™lÉ™r tÉ™yin etmÉ™yÉ™ imkan verir.
âœ… Monitoring vÉ™ Logging â€“ KonteynerlÉ™rin performansÄ±nÄ± vÉ™ loglarÄ±nÄ± izlÉ™mÉ™yÉ™ koÌˆmÉ™k edir.
âœ… Docker Compose vÉ™ Stack idarÉ™etmÉ™si â€“ Docker Compose vÉ™ Swarm Stacks-i idarÉ™ etmÉ™k imkanÄ± yaradÄ±r.

Portainer necÉ™ qurulur?
Portainer-i qurasÌ§dÄ±rmaq uÌˆcÌ§uÌˆn Docker-in sisteminizdÉ™ quruldugÌ†una É™min olun. ÆgÉ™r Docker qurulmayÄ±bsa, É™vvÉ™lcÉ™ onu qurmalÄ±sÄ±nÄ±z.
1. Portainer-i Docker konteyneri kimi isÌ§lÉ™tmÉ™k
Bu É™mr Portainer-i qurur vÉ™ isÌ§É™ salÄ±r:
docker volume create portainer_data
docker run -d -p 8000:8000 -p 9443:9443 --name portainer \
    --restart=always \
    -v /var/run/docker.sock:/var/run/docker.sock \
    -v portainer_data:/data \
    portainer/portainer-ce:latest
2. Portainer veb interfeysinÉ™ daxil olmaq
BrauzerdÉ™ asÌ§agÌ†Ä±dakÄ± URL-É™ daxil olun:
ğŸ”— https://localhost:9443
IÌ‡lk dÉ™fÉ™ girisÌ§ edÉ™rkÉ™n administrator hesabÄ± uÌˆcÌ§uÌˆn parol yaratmalÄ±sÄ±nÄ±z.

Portainer-i Swarm vÉ™ ya Kubernetes uÌˆcÌ§uÌˆn qurmaq
ÆgÉ™r Docker Swarm vÉ™ ya Kubernetes muÌˆhitindÉ™ istifadÉ™ etmÉ™k istÉ™yirsinizsÉ™, uygÌ†un agentlÉ™ri qurasÌ§dÄ±rmalÄ±sÄ±nÄ±z.
Swarm uÌˆcÌ§uÌˆn:
docker service create \
    --name portainer \
    --publish 8000:8000 --publish 9443:9443 \
    --constraint 'node.role == manager' \
    --mount type=bind,src=/var/run/docker.sock,dst=/var/run/docker.sock \
    --mount type=volume,src=portainer_data,dst=/data \
    portainer/portainer-ce:latest
Kubernetes uÌˆcÌ§uÌˆn:
kubectl apply -f https://downloads.portainer.io/portainer-agent-k8s.yaml

NÉ™ticÉ™
Portainer, konteynerlÉ™rinizi daha rahat vÉ™ effektiv idarÉ™ etmÉ™yÉ™ koÌˆmÉ™k edÉ™n guÌˆcluÌˆ bir vasitÉ™dir. Æsas uÌˆstuÌˆnluÌˆklÉ™ri arasÄ±nda qrafik interfeys, multi-user dÉ™stÉ™yi vÉ™ monitoring imkanlarÄ± var. XuÌˆsusilÉ™ Docker Swarm vÉ™ Kubernetes kimi kompleks muÌˆhitlÉ™rdÉ™ idarÉ™etmÉ™niÂ asanlasÌ§dÄ±rÄ±r.



////
Docker info
sadece: docker swarm init yazaraq komputerimizi esas menecer ede bilerik
docker node ls
